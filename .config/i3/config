set $mod Mod4
set $mod2 Mod3
set $term 1
set $code 2
set $web 3
set $mail 4
set $image 5
set $chat 6
set $music 7
set $dark #333333
set $darker #666666
set $brighter #aaaaaa
set $bright #dddddd
set $bar_height 50
set $font_size 12
set $bar_color #000000aa

# Font
font pango:Source Sans Pro Semibold $font_size

# Dragging windows
floating_modifier $mod

# Terminal
bindsym $mod+Return exec --no-startup-id alacritty

# Kill focused window
bindsym $mod+q kill

# Dmenu
bindsym $mod+d exec --no-startup-id rofi -config .config/rofi/config -show run

# Focus
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# No focus wrapping
focus_wrapping no

# Move
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# Split
bindsym $mod+h split h
bindsym $mod+v split v

# Fullscreen
bindsym $mod+f fullscreen toggle

# Toggle tiling / floating
bindsym $mod+space floating toggle

# Default workspace
exec --no-startup-id i3-msg "workspace $term"

# Marking containers
bindsym $mod+m sticky toggle

# Switch workspace
bindsym $mod+1 workspace number $term
bindsym $mod+2 workspace number $code
bindsym $mod+3 workspace number $web
bindsym $mod+4 workspace number $mail
bindsym $mod+5 workspace number $image
bindsym $mod+6 workspace number $chat
bindsym $mod+7 workspace number $music

# Move windows
bindsym $mod+Shift+1 move container to workspace number $term
bindsym $mod+Shift+2 move container to workspace number $code
bindsym $mod+Shift+3 move container to workspace number $web
bindsym $mod+Shift+4 move container to workspace number $mail
bindsym $mod+Shift+5 move container to workspace number $image
bindsym $mod+Shift+6 move container to workspace number $chat
bindsym $mod+Shift+7 move container to workspace number $music

# Reload, restart, exit
bindsym $mod+Shift+r restart
bindsym $mod+Shift+e exec --no-startup-id i3-msg exit

# Resize
mode "Resize" {
  bindsym Left resize shrink width 5 px
  bindsym Down resize grow height 5 px
  bindsym Up resize shrink height 5 px
  bindsym Right resize grow width 5 px
  bindsym Escape mode "default"
}
bindsym $mod+r mode "Resize"

# Top bar
bar {
	id 0
	i3bar_command i3bar -t
	status_command i3blocks
	mode dock
	position top
	colors {
		background $bar_color
		focused_workspace $bar_color $bar_color $bright
		inactive_workspace $bar_color $bar_color $brighter
		urgent_workspace $bar_color $bar_color $brighter
		separator $bright
	}
	font pango:Source Sans Pro Semibold $font_size
	separator_symbol ""
	height $bar_height
	tray_output none
	binding_mode_indicator no
	strip_workspace_numbers yes
}

# Bottom bar
bar {
	id 1
	position bottom
	mode hide
	colors { background $dark }
	height 35
	tray_output primary
	tray_padding 3
	binding_mode_indicator yes
	workspace_buttons no
	modifier $mod2
}

# Screenshot
bindsym $mod+p exec --no-startup-id scrot /tmp/screen.png -q 100 & xclip -i /tmp/screen.png -t image/png -selection CLIPBOARD & rm /tmp/screen.png & notify-send "Screenshot taken"
bindsym $mod+Shift+p exec --no-startup-id scrot ~/Images/screenshot.png -q 100 & notify-send "Screenshot saved"

# Wallpaper
exec_always --no-startup-id ~/Scripts/random_wallpaper.sh

# Brightness
# bindsym XF86MonBrightnessUp exec --no-startup-id light -Ar 5 && pkill -RTMIN+2 i3blocks
# bindsym XF86MonBrightnessDown exec --no-startup-id light -Ur 5 && pkill -RTMIN+2 i3blocks

# Audio
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume 1 +5% && pkill -RTMIN+1 i3blocks
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume 1 -5% && pkill -RTMIN+1 i3blocks
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute 1 toggle && pkill -RTMIN+1 i3blocks

# Colors (Border, Background, Text, Indicator, Child border)
client.focused			$bright $dark $bright $dark $bright
client.focused_inactive		$brighter $dark $bright $dark $brighter
client.unfocused		$darker $dark $bright $dark $darker
client.urgent			$darker $dark $bright $dark $darker
client.background		$dark

# Workspace assignments
assign [class="Atom"] $code
assign [class="Firefox"] $web
assign [class="Thunderbird"] $mail
assign [class="Gimp"] $image
assign [class="discord"] $chat
assign [class="Spotify"] $music

# Don't focus popups
no_focus [window_role="pop-up"]

# Borders
default_border pixel 1
default_floating_border pixel 1
hide_edge_borders none
smart_borders on

# Gaps
gaps inner 15
gaps outer -10

# Blue light filter
exec --no-startup-id redshift -l 52.520008:13.404954

# Cronjobs
exec --no-startup-id tinycron "* */30 * * * * *" "sh ~/Scripts/random_wallpaper.sh"
